# Reference Snapshots

This directory stores JSON dumps generated by external parsers so the Rust
implementation can be compared against independent baselines.

- `haven/` is created by `scripts/generate_haven_dumps.R`
- `pandas/` and `pyreadstat/` are created by `scripts/generate_pandas_dumps.py`

If `readstat` is installed locally, the test suite can also compare fixtures
against its CSV output dynamically (no stored snapshots required). The
`fixtures_snapshot_readstat` test runs by default when the binary is available.

To enable the stored pyreadstat snapshots, set
`SAS7BDAT_PYREADSTAT_SNAPSHOTS=1` before running the tests.

Each subdirectory mirrors the SAS fixture tree and replaces the `.sas7bdat`
suffix with `.json`.  Run the generators after adding or updating fixtures,
then review the resulting changes before committing.

```
# Update Python-based references
python scripts/generate_pandas_dumps.py

# Update Haven-based references
Rscript scripts/generate_haven_dumps.R
```

If a fixture cannot be decoded by a parser it should be listed in the skip list
within the corresponding script so the test harness knows to ignore it.
